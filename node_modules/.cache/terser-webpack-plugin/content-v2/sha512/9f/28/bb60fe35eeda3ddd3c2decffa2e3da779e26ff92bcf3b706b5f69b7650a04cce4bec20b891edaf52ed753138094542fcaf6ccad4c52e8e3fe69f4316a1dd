{"map":"{\"version\":3,\"sources\":[\"/Users/10001oleg/1proj/2222/weather-forecast-one/src/actions/index.js\",\"/Users/10001oleg/1proj/2222/weather-forecast-one/src/actions/actionTypes.js\",\"/Users/10001oleg/1proj/2222/weather-forecast-one/src/components/currentWeather/index.js\",\"/Users/10001oleg/1proj/2222/weather-forecast-one/src/helpers/capitalize.js\",\"/Users/10001oleg/1proj/2222/weather-forecast-one/src/containers/weather/index.js\",\"/Users/10001oleg/1proj/2222/weather-forecast-one/src/components/app/index.js\",\"/Users/10001oleg/1proj/2222/weather-forecast-one/src/reducers/weatherReducer.js\",\"/Users/10001oleg/1proj/2222/weather-forecast-one/src/reducers/index.js\",\"/Users/10001oleg/1proj/2222/weather-forecast-one/src/index.js\"],\"names\":[\"requestWeather\",\"type\",\"receiveWeather\",\"payload\",\"CurrentWeather\",\"props\",\"_this\",\"Object\",\"classCallCheck\",\"this\",\"possibleConstructorReturn\",\"getPrototypeOf\",\"call\",\"state\",\"weather\",\"data\",\"string\",\"temperature\",\"Math\",\"round\",\"main\",\"temp\",\"_weather$weather$\",\"description\",\"icon\",\"humidity\",\"speed\",\"wind\",\"react_default\",\"a\",\"createElement\",\"className\",\"charAt\",\"toUpperCase\",\"slice\",\"src\",\"concat\",\"alt\",\"Component\",\"Weather\",\"renderLoading\",\"renderWeather\",\"_this$props\",\"city\",\"components_currentWeather\",\"shouldRenderWeather\",\"isFetching\",\"fetchWeather\",\"connect\",\"dispatch\",\"cacheTime\",\"source\",\"localStorage\",\"getItem\",\"_JSON$parse\",\"JSON\",\"parse\",\"timestamp\",\"Date\",\"now\",\"sholdFetchData\",\"navigator\",\"geolocation\",\"getCurrentPosition\",\"position\",\"lat\",\"coords\",\"latitude\",\"lon\",\"longitude\",\"URL\",\"config\",\"key\",\"axios\",\"get\",\"then\",\"res\",\"setItem\",\"stringify\",\"catch\",\"error\",\"console\",\"alert\",\"App\",\"containers_weather\",\"initialState\",\"rootReducer\",\"combineReducers\",\"arguments\",\"length\",\"undefined\",\"action\",\"objectSpread\",\"name\",\"createStoreWithMiddleWare\",\"applyMiddleware\",\"ReduxThunk\",\"logger\",\"createStore\",\"ReactDOM\",\"render\",\"react_redux_es\",\"store\",\"reducers\",\"app\",\"document\",\"getElementById\"],\"mappings\":\"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\",\"sourcesContent\":[\"import * as types from \\\"./actionTypes\\\";\\nimport axios from \\\"axios\\\";\\nimport config from \\\"../helpers/config.json\\\";\\n\\nconst sholdFetchData = cacheTime => {\\n  const source = localStorage.getItem(\\\"weather\\\");\\n\\n  if (!source) {\\n    return null;\\n  }\\n\\n  const { timestamp, data } = JSON.parse(source);\\n  const checkTimestamp = Date.now() - timestamp > cacheTime * 60000;\\n\\n  if (checkTimestamp) {\\n    return null;\\n  }\\n  return data;\\n};\\n\\nexport const fetchWeather = () => dispatch => {\\n  dispatch(requestWeather());\\n  const data = sholdFetchData(60);\\n\\n  if (data) {\\n    return dispatch(receiveWeather(data));\\n  }\\n\\n  navigator.geolocation.getCurrentPosition(position => {\\n    let lat = position.coords.latitude;\\n    let lon = position.coords.longitude;\\n    const URL = `http://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&APPID=${\\n      config.key\\n    }&units=imperial`;\\n\\n    axios\\n      .get(URL)\\n      .then(res => {\\n        dispatch(receiveWeather(res.data));\\n        localStorage.setItem(\\n          \\\"weather\\\",\\n          JSON.stringify({ timestamp: Date.now(), data: res.data })\\n        );\\n      })\\n      .catch(error => {\\n        console.error(error);\\n        alert(\\\"Unable to retrieve weather data. Please refresh.\\\");\\n      });\\n  });\\n};\\n\\nconst requestWeather = () => {\\n  return {\\n    type: types.REQUEST_WEATHER\\n  };\\n};\\n\\nconst receiveWeather = payload => {\\n  return {\\n    type: types.RECEIVE_WEATHER,\\n    payload\\n  };\\n};\\n\",\"export const FETCH_WEATHER = \\\"FETCH_WEATHER\\\";\\nexport const RECEIVE_WEATHER = \\\"RECEIVE_WEATHER\\\";\\nexport const REQUEST_WEATHER = \\\"REQUEST_WEATHER\\\";\\n\",\"import React, { Component } from \\\"react\\\";\\nimport PropTypes from \\\"prop-types\\\";\\nimport { capitalize } from \\\"../../helpers\\\";\\nimport \\\"./currentWeather.css\\\";\\n\\nclass CurrentWeather extends Component {\\n  constructor(props) {\\n    super(props);\\n    this.state = {\\n      weather: props.data\\n    };\\n  }\\n\\n  render() {\\n    const { weather } = this.state;\\n    const temperature = Math.round(+weather.main.temp);\\n    const { description, icon } = weather.weather[0];\\n    const {\\n      main: { humidity },\\n      wind: { speed }\\n    } = weather;\\n\\n    return (\\n      <div className=\\\"current-weather\\\">\\n        <p>{capitalize(description)}</p>\\n        <h1 className=\\\"large-font\\\">\\n          <span>\\n            <img\\n              src={`http://openweathermap.org/img/w/${icon}.png`}\\n              alt={`icon ${description}`}\\n            />\\n          </span>\\n          {temperature}Â°F\\n        </h1>\\n        <p>Humidity: {humidity}</p>\\n        <p>Wind: {speed}</p>\\n      </div>\\n    );\\n  }\\n}\\n\\nCurrentWeather.propTypes = {\\n  data: PropTypes.object.isRequired\\n};\\n\\nexport default CurrentWeather;\\n\",\"export const capitalize = string => {\\n  return string.charAt(0).toUpperCase() + string.slice(1);\\n};\\n\",\"import React, { Component } from \\\"react\\\";\\nimport PropTypes from \\\"prop-types\\\";\\nimport { connect } from \\\"react-redux\\\";\\nimport { fetchWeather } from \\\"../../actions\\\";\\nimport CurrentWeather from \\\"../../components/currentWeather\\\";\\nimport \\\"./Weather.css\\\";\\n\\nclass Weather extends Component {\\n  componentDidMount() {\\n    this.props.fetchWeather();\\n  }\\n\\n  renderLoading = () => {\\n    return <div className=\\\"container center\\\">Loading...</div>;\\n  };\\n\\n  renderWeather = () => {\\n    const { city, data } = this.props;\\n    return (\\n      <div className=\\\"container center\\\">\\n        <h1>{city}</h1>\\n        <CurrentWeather data={data} />\\n      </div>\\n    );\\n  };\\n\\n  shouldRenderWeather = () => {\\n    if (this.props.isFetching || !this.props.data) {\\n      return this.renderLoading();\\n    } else {\\n      return this.renderWeather();\\n    }\\n  };\\n\\n  render() {\\n    return this.shouldRenderWeather();\\n  }\\n}\\n\\nconst mapStateToProps = state => {\\n  return {\\n    isFetching: state.weather.isFetching,\\n    data: state.weather.data,\\n    city: state.weather.city\\n  };\\n};\\n\\nWeather.propTypes = {\\n  isFetching: PropTypes.bool.isRequired,\\n  data: PropTypes.object,\\n  city: PropTypes.string\\n};\\n\\nexport default connect(\\n  mapStateToProps,\\n  { fetchWeather }\\n)(Weather);\\n\",\"import React from \\\"react\\\";\\nimport Weather from \\\"../../containers/weather\\\";\\nimport \\\"./App.css\\\";\\n\\nconst App = () => {\\n  return (\\n    <div className=\\\"background\\\">\\n      <Weather />\\n    </div>\\n  );\\n};\\n\\nexport default App;\\n\",\"import * as types from \\\"../actions/actionTypes.js\\\";\\n\\nvar initialState = {\\n  isFetching: false,\\n  data: null,\\n  city: null\\n};\\n\\nexport default (state = initialState, action) => {\\n  switch (action.type) {\\n    case types.REQUEST_WEATHER:\\n      return { ...state, isFetching: true };\\n    case types.RECEIVE_WEATHER:\\n      const newState = {\\n        ...state,\\n        isFetching: false,\\n        data: action.payload,\\n        city: action.payload.name\\n      };\\n      return newState;\\n    default:\\n      return state;\\n  }\\n};\\n\",\"import { combineReducers } from 'redux';\\nimport weatherReducer from './weatherReducer';\\n\\nconst rootReducer = combineReducers({\\n  weather: weatherReducer\\n})\\n\\nexport default rootReducer;\\n\",\"import React from \\\"react\\\";\\nimport ReactDOM from \\\"react-dom\\\";\\nimport { createStore, applyMiddleware } from \\\"redux\\\";\\nimport ReduxThunk from \\\"redux-thunk\\\";\\nimport logger from \\\"redux-logger\\\";\\nimport { Provider } from \\\"react-redux\\\";\\n\\nimport \\\"./index.css\\\";\\nimport App from \\\"./components/app\\\";\\nimport reducers from \\\"./reducers\\\";\\n\\nconst createStoreWithMiddleWare = applyMiddleware(ReduxThunk, logger)(\\n  createStore\\n);\\n\\nReactDOM.render(\\n  <Provider store={createStoreWithMiddleWare(reducers)}>\\n    <App />\\n  </Provider>,\\n  document.getElementById(\\\"root\\\")\\n);\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e){e.exports={key:\"46d6b695a7350980a942eaea05c367f2\"}},29:function(e,t,a){e.exports=a(61)},38:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){\"use strict\";a.r(t);var n=a(0),r=a.n(n),c=a(23),i=a.n(c),o=a(2),u=a(24),l=a(25),s=a.n(l),d=a(8),h=(a(38),a(5)),p=a(6),m=a(9),f=a(7),E=a(10),g=a(27),w=a.n(g),v=a(28),y=function(){return{type:\"REQUEST_WEATHER\"}},b=function(e){return{type:\"RECEIVE_WEATHER\",payload:e}},O=(a(58),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={weather:e.data},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:\"render\",value:function(){var e,t=this.state.weather,a=Math.round(+t.main.temp),n=t.weather[0],c=n.description,i=n.icon,o=t.main.humidity,u=t.wind.speed;return r.a.createElement(\"div\",{className:\"current-weather\"},r.a.createElement(\"p\",null,(e=c).charAt(0).toUpperCase()+e.slice(1)),r.a.createElement(\"h1\",{className:\"large-font\"},r.a.createElement(\"span\",null,r.a.createElement(\"img\",{src:\"http://openweathermap.org/img/w/\".concat(i,\".png\"),alt:\"icon \".concat(c)})),a,\"\\xb0F\"),r.a.createElement(\"p\",null,\"Humidity: \",o),r.a.createElement(\"p\",null,\"Wind: \",u))}}]),t}(n.Component)),j=(a(59),function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(c)))).renderLoading=function(){return r.a.createElement(\"div\",{className:\"container center\"},\"Loading...\")},a.renderWeather=function(){var e=a.props,t=e.city,n=e.data;return r.a.createElement(\"div\",{className:\"container center\"},r.a.createElement(\"h1\",null,t),r.a.createElement(O,{data:n}))},a.shouldRenderWeather=function(){return a.props.isFetching||!a.props.data?a.renderLoading():a.renderWeather()},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:\"componentDidMount\",value:function(){this.props.fetchWeather()}},{key:\"render\",value:function(){return this.shouldRenderWeather()}}]),t}(n.Component)),W=Object(d.b)(function(e){return{isFetching:e.weather.isFetching,data:e.weather.data,city:e.weather.city}},{fetchWeather:function(){return function(e){e(y());var t=function(e){var t=localStorage.getItem(\"weather\");if(!t)return null;var a=JSON.parse(t),n=a.timestamp,r=a.data;return Date.now()-n>6e4*e?null:r}(60);if(t)return e(b(t));navigator.geolocation.getCurrentPosition(function(t){var a=t.coords.latitude,n=t.coords.longitude,r=\"http://api.openweathermap.org/data/2.5/weather?lat=\".concat(a,\"&lon=\").concat(n,\"&APPID=\").concat(v.key,\"&units=imperial\");w.a.get(r).then(function(t){e(b(t.data)),localStorage.setItem(\"weather\",JSON.stringify({timestamp:Date.now(),data:t.data}))}).catch(function(e){console.error(e),alert(\"Unable to retrieve weather data. Please refresh.\")})})}}})(j),R=(a(60),function(){return r.a.createElement(\"div\",{className:\"background\"},r.a.createElement(W,null))}),k=a(16),A={isFetching:!1,data:null,city:null},F=Object(o.c)({weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"REQUEST_WEATHER\":return Object(k.a)({},e,{isFetching:!0});case\"RECEIVE_WEATHER\":return Object(k.a)({},e,{isFetching:!1,data:t.payload,city:t.payload.name});default:return e}}}),N=Object(o.a)(u.a,s.a)(o.d);i.a.render(r.a.createElement(d.a,{store:N(F)},r.a.createElement(R,null)),document.getElementById(\"root\"))}},[[29,1,2]]]);","extractedComments":[]}